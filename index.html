<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ Ø±ÛŒØ§Ø¶ÛŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing: border-box; }

body {
  font-family: "Vazirmatn", Tahoma, sans-serif;
  margin: 0;
  padding: 0;
  transition: background 0.4s ease, color 0.4s ease;
}

/* Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù† */
body.light {
  background: radial-gradient(circle at top, #e8f0ff, #ffffff 55%, #dfe7f3);
  color: #222;
}

/* Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ© */
body.dark {
  background: radial-gradient(circle at top, #020817, #050816 45%, #020617);
  color: #e6e6e6;
}

/* Ø¯Ú©Ù…Ù‡ Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯ */
.toggle-btn {
  position: fixed;
  top: 16px;
  left: 16px;
  background: rgba(30, 41, 59, 0.9);
  color: white;
  padding: 9px 14px;
  border-radius: 999px;
  cursor: pointer;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: background 0.3s ease, transform 0.2s ease;
  z-index: 1000;
}
.toggle-btn:hover {
  background: rgba(15, 23, 42, 1);
  transform: translateY(-1px);
}

/* Ù¾Ù†Ù„ Ø§ØµÙ„ÛŒ */
.panel {
  max-width: 900px;
  margin: 70px auto 40px auto;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(18px);
  padding: 26px 24px 30px 24px;
  border-radius: 22px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.7);
  animation: fadeIn 0.8s ease;
}

body.dark .panel {
  background: rgba(15, 23, 42, 0.82);
  box-shadow: 0 20px 55px rgba(0,0,0,0.85);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(25px); }
  to   { opacity: 1; transform: translateY(0); }
}

h2 {
  text-align: center;
  font-size: 26px;
  margin-bottom: 6px;
}

.subtitle {
  text-align: center;
  font-size: 14px;
  opacity: 0.8;
  margin-bottom: 18px;
}

#views {
  text-align: center;
  font-size: 13px;
  opacity: 0.75;
  margin-bottom: 18px;
}

/* ÙÛŒÙ„ØªØ±Ù‡Ø§ */
.filters {
  display: flex;
  gap: 10px;
  margin-bottom: 18px;
  justify-content: center;
}
.filters button {
  padding: 7px 14px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  background: rgba(30, 41, 59, 0.7);
  color: white;
  font-size: 13px;
  transition: 0.2s;
}
.filters button.active {
  background: #2563eb;
  color: white;
}

/* Ø¬Ø³ØªØ¬Ùˆ */
#search-box {
  width: 100%;
  padding: 10px;
  margin-bottom: 14px;
  border-radius: 12px;
  border: none;
  font-size: 14px;
  outline: none;
}

/* Ù„ÛŒØ³Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ */
ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

li {
  background: linear-gradient(135deg, rgba(248, 250, 252, 0.9), rgba(226, 232, 240, 0.9));
  margin: 10px 0;
  padding: 14px 16px;
  border-radius: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.18);
  transition: transform 0.22s ease, box-shadow 0.22s ease;
}

body.dark li {
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 64, 175, 0.85));
  box-shadow: 0 8px 22px rgba(0,0,0,0.6);
}

li:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 26px rgba(15, 23, 42, 0.3);
}

.file-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.file-title {
  font-size: 15px;
  font-weight: 600;
}

.file-meta {
  font-size: 12px;
  opacity: 0.8;
}

/* Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ */
.badge {
  padding: 2px 6px;
  border-radius: 6px;
  font-size: 10px;
  margin-right: 6px;
}
.badge.new { background: #ff3b3b; color: white; }
.badge.notdl { background: #ffaa00; color: black; }

/* Ø¯Ú©Ù…Ù‡ Ø¯Ø§Ù†Ù„ÙˆØ¯ */
.download-btn {
  text-decoration: none;
  color: white;
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  padding: 8px 16px;
  border-radius: 999px;
  font-size: 13px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: 0.2s ease;
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.5);
}
.download-btn:hover {
  transform: translateY(-1px) scale(1.02);
  box-shadow: 0 6px 16px rgba(37, 99, 235, 0.7);
}

/* Ù†Ø³Ø®Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
@media (max-width: 600px) {
  .panel {
    margin: 20px 12px 30px 12px;
    padding: 18px 14px 22px 14px;
  }

  li {
    flex-direction: column;
    align-items: flex-start;
    padding: 12px;
    gap: 8px;
  }

  .download-btn {
    width: 100%;
    justify-content: center;
    padding: 10px 0;
    font-size: 14px;
    border-radius: 12px;
  }
}
</style>
</head>
<body class="dark">

<div class="toggle-btn" onclick="toggleTheme()">
  <span>ğŸŒ™</span>
  <div id="theme-label">Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©</div>
</div>

<div class="panel">
  <h2>ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ Ø±ÛŒØ§Ø¶ÛŒ</h2>
  <div class="subtitle">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ØŒ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ùˆ Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙˆØ§Ù„â€ŒÙ‡Ø§</div>
  <div id="views">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

  <!-- Ø¬Ø³ØªØ¬Ùˆ -->
  <input id="search-box" type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§...">

  <!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ -->
  <div class="filters">
    <button data-filter="all" class="active">Ù‡Ù…Ù‡</button>
    <button data-filter="new">Ø¬Ø¯ÛŒØ¯Ù‡Ø§</button>
    <button data-filter="not-downloaded">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡</button>
    <button data-filter="downloaded">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯Ù‡</button>
  </div>

  <ul id="file-list"></ul>

  <div class="footer" style="text-align:center;margin-top:25px;font-size:13px;opacity:0.8;">
    Â© 2026 â€” ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª | Ø¢Ø±Ø´Ø§Ù… ÙØ§Ø¶Ù„
  </div>
</div>

<script>
// ------------------ Ø¯Ø§Ø±Ú©/Ù„Ø§ÛŒØª Ù…ÙˆØ¯ ------------------
function applyTheme(theme) {
  document.body.classList.remove("light", "dark");
  document.body.classList.add(theme);
  const label = document.getElementById("theme-label");
  const iconSpan = document.querySelector(".toggle-btn span");
  if (theme === "dark") {
    label.textContent = "Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©";
    iconSpan.textContent = "ğŸŒ™";
  } else {
    label.textContent = "Ø­Ø§Ù„Øª Ø±ÙˆØ´Ù†";
    iconSpan.textContent = "â˜€ï¸";
  }
}

function toggleTheme() {
  const current = document.body.classList.contains("dark") ? "dark" : "light";
  const next = current === "dark" ? "light" : "dark";
  applyTheme(next);
  localStorage.setItem("theme", next);
}

(function initTheme() {
  const saved = localStorage.getItem("theme");
  if (saved) applyTheme(saved);
  else applyTheme("dark");
})();

// ------------------ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø§Ø²Ø¯ÛŒØ¯ ------------------
(function visitCounter() {
  let views = localStorage.getItem("myViews");
  views = views ? Number(views) + 1 : 1;
  localStorage.setItem("myViews", views);
  document.getElementById("views").textContent = "ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ø´Ù…Ø§: " + views;
})();

// ------------------ ØªØ´Ø®ÛŒØµ Ø¢ÛŒÚ©ÙˆÙ† ------------------
function getFileIcon(name) {
  const ext = name.split(".").pop().toLowerCase();
  const icons = {
    pdf: "ğŸ“•", zip: "ğŸ—‚ï¸", rar: "ğŸ—‚ï¸",
    jpg: "ğŸ–¼ï¸", jpeg: "ğŸ–¼ï¸", png: "ğŸ–¼ï¸", gif: "ğŸ–¼ï¸",
    mp4: "ğŸ¬", mov: "ğŸ¬", avi: "ğŸ¬",
    mp3: "ğŸµ", wav: "ğŸµ",
    doc: "ğŸ“„", docx: "ğŸ“„",
    ppt: "ğŸ“Š", pptx: "ğŸ“Š",
    txt: "ğŸ“˜", json: "ğŸ§©", html: "ğŸŒ"
  };
  return icons[ext] || "ğŸ“";
}

// ------------------ Ú¯Ø±ÙØªÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø² GitHub ------------------
async function loadFiles() {
  const url = "https://api.github.com/repos/fordriveaf-hue/files-class/contents/files";
  const res = await fetch(url);
  const data = await res.json();

  const files = data
    .filter(item => item.type === "file")
    .map(item => ({
      name: item.name,
      size: (item.size / 1024).toFixed(1) + "KB",
      url: item.download_url,
      icon: getFileIcon(item.name)
    }));

  markNewFiles(files);
  renderFiles(files);
  saveFileList(files);
}

// ------------------ Ø°Ø®ÛŒØ±Ù‡ Ù„ÛŒØ³Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ ------------------
function saveFileList(files) {
  localStorage.setItem("fileList", JSON.stringify(files.map(f => f.name)));
}

// ------------------ ØªØ´Ø®ÛŒØµ ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ ------------------
function markNewFiles(files) {
  const oldList = JSON.parse(localStorage.getItem("fileList") || "[]");
  files.forEach(f => f.isNew = !oldList.includes(f.name));
}

// ------------------ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯Ù‡â€ŒÙ‡Ø§ ------------------
function isDownloaded(name) {
  const list = JSON.parse(localStorage.getItem("downloadedFiles") || "[]");
  return list.includes(name);
}
function markDownloaded(name) {
  const list = JSON.parse(localStorage.getItem("downloadedFiles") || "[]");
  if (!list.includes(name)) {
    list.push(name);
    localStorage.setItem("downloadedFiles", JSON.stringify(list));
  }
}

// ------------------ Ø±Ù†Ø¯Ø± ------------------
function renderFiles(list) {
  const ul = document.getElementById("file-list");
  ul.innerHTML = "";

  list.forEach(file => {
    const li = document.createElement("li");

    const downloaded = isDownloaded(file.name);
    const newBadge = file.isNew ? `<span class="badge new">NEW</span>` : "";
    const dlBadge = !downloaded ? `<span class="badge notdl">Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†Ø´Ø¯Ù‡</span>` : "";

    li.classList.add(file.isNew ? "is-new" : "");
    li.classList.add(downloaded ? "downloaded" : "not-downloaded");

    li.innerHTML = `
      <div class="file-info">
        <div class="file-title">
          ${newBadge}${dlBadge}
          <span class="file-icon">${file.icon}</span>${file.name}
        </div>
        <div class="file-meta">Ø­Ø¬Ù…: ${file.size}</div>
      </div>
      <a class="download-btn" href="${file.url}" target="_blank" data-name="${file.name}">
        <span>â¬‡ï¸</span> Ø¯Ø§Ù†Ù„ÙˆØ¯
      </a>
    `;

    ul.appendChild(li);
  });

  document.querySelectorAll(".download-btn").forEach(btn => {
    btn.addEventListener("click", () => markDownloaded(btn.dataset.name));
  });
}

// ------------------ ÙÛŒÙ„ØªØ± ------------------
function applyFilter(type) {
  const items = document.querySelectorAll("#file-list li");

  items.forEach(li => {
    li.style.display = "flex";

    if (type === "new" && !li.classList.contains("is-new")) li.style.display = "none";
    if (type === "not-downloaded" && !li.classList.contains("not-downloaded")) li.style.display = "none";
    if (type === "downloaded" && !li.classList.contains("downloaded")) li.style.display = "none";
  });
}

document.addEventListener("click", e => {
  if (e.target.matches(".filters button")) {
    document.querySelectorAll(".filters button").forEach(btn => btn.classList.remove("active"));
    e.target.classList.add("active");
    applyFilter(e.target.dataset.filter);
  }
});

// ------------------ Ø¬Ø³ØªØ¬Ùˆ ------------------
document.getElementById("search-box").addEventListener("input", function () {
  const text = this.value.trim().toLowerCase();
  const items = document.querySelectorAll("#file-list li");

  items.forEach(li => {
    const name = li.querySelector(".file-title").textContent.toLowerCase();
    li.style.display = name.includes(text) ? "flex" : "none";
  });
});

// ------------------ Ø´Ø±ÙˆØ¹ ------------------
loadFiles();
</script>

</body>
</html>
